<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Disponibilidad de Parqueo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="{{ url_for('static', filename='img/parking.png') }}" type="image/x-icon"/>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>

  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow-x: hidden;
    }

    .box {
      aspect-ratio: 1 / 1;
      width: 100%;
      max-width: 40px;
      max-height: 40px;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 0.375rem;
      font-weight: bold;
      color: white;
    }

    @media (max-width: 768px) {
      .box {
        font-size: 3vw;
        max-width: 32px;
        max-height: 32px;
      }
    }
  </style>
</head>

<body class="bg-gray-100 text-gray-800">
  <header class="py-4 px-6 grid grid-cols-3 items-center">
    <div class="flex items-center">
      <img
        src="{{ url_for('static', filename='img/ESEN.png') }}"
        alt="Logo ESEN"
        class="w-14 opacity-80"
      />
    </div>

    <h1 class="text-2xl text-center font-bold">Parking Availability</h1>

    <div class="text-sm text-gray-700 text-right leading-tight">
      <p><strong>Total:</strong> {{ parqueos|length }}</p>
      <p>
        <strong>Disponibles:</strong>
        {{ parqueos|selectattr('estado', 'equalto', 'available')|list|length }}
      </p>
      <p>
        <strong>Ocupados:</strong>
        {{ parqueos|selectattr('estado', 'equalto', 'occupied')|list|length }}
      </p>
    </div>
  </header>

  <main class="container px-4 mx-auto">
    <div class="grid grid-cols-1 gap-6 items-start">
        <div class="flex justify-between">
            <div class="flex-grow bg-white flex justify-center rounded-lg w-150 items-center">
                <img
                    src="{{ url_for('static', filename='img/parqueo.png') }}"
                    alt="Zona de parqueo"
                    class="w-96 opacity-80"
                />
                 <div class="ml-6 flex flex-col justify-center space-y-1">
                    <h1>ðŸŸ¥ <strong>taken</strong></h1>
                    <h1>ðŸŸ© <strong>available</strong></h1>
                </div>
            </div>
            <!-- Zona B -->
            <section class="zona-b py-4 ml-6 w-96">
                <h2 class="text-xl font-semibold mb-4 text-center">Zone B</h2>
                <div class="mx-auto max-w-xs">
                    <div class=" grid grid-cols-6 gap-2 justify-center">
                    {% for i in range(1,7) %}
                        <div class="flex flex-col space-y-1 items-center">
                            {% for p in parqueos if p.zona == 'B' and p.subzona == 'fila-' ~ i %}
                            <div
                            class="box {% if p.estado == 'available' %} bg-green-500 {% else %} bg-red-500 {% endif %}"
                            title="Parqueo {{ p.id }}"
                            >
                            {{ p.id }}
                            </div>
                            {% endfor %}
                        </div>
                    {% endfor %}
                    </div>
                </div>
            </section>
        </div>

        <!-- Zona A -->
        <section class="zona-a w-full">
          <h2 class="text-xl font-semibold mb-2 text-center">Zone A</h2>
          <div class="grid grid-rows-6 gap-2 w-full px-2">
            {% for i in range(1,7) %}
            <div class="flex space-x-1 justify-center">
              {% for p in parqueos if p.zona == 'A' and p.subzona == 'col-' ~ i %}
              <div
                class="box {% if p.estado == 'available' %} bg-green-500 {% else %} bg-red-500 {% endif %}"
                title="Parqueo {{ p.id }}"
              >
                {{ p.id }}
              </div>
              {% endfor %}
            </div>
            {% endfor %}
          </div>
        </section>
    </div>
  </main>

  <!-- Recarga automÃ¡tica -->
  <script>
    setInterval(() => {
      window.location.reload();
    }, 4000);
  </script>
</body>
</html>
